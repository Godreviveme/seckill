### 页面优化技术

浏览器缓存(页面静态化) -> CDN节点 -> nginx缓存 -> 页面缓存 -> 对象缓存 -> 数据库

- 页面缓存 + URL缓存 + 对象缓存
> 尽量避免service层调用其他类的dao，这样可能导致越过其他类service层中的缓存
- 页面静态化，前后端分离
- 静态资源优化（Tengine）
   - JS/CSS压缩，减少流量
   - 多个JS/CSS组合，较少连接数
   - CDN(Content Delivery NetWork)就近访问
- CDN优化

### 接口优化

优化手段：
- Redis预减库存减少数据库访问
- 内存标记减少对redis访问
- 请求先入队缓存，异步下单，增强用户体验
- Nginx水平扩展
- 分库分表（Mycat）

### 优化步骤：
- 系统初始化，把商品库存数量加载到Redis
- 收到请求，Redis预减库存，库存不足，直接返回，否则进入下一步
- 请求入队，立即返回排队中
- 请求出队，生成订单，减少库存
- 客户端了轮询，是否秒杀成功

### 安全优化
- 秒杀接口地址隐藏
- 数学公式验证码（防止机器人刷单；分散请求时间）
- 接口限流防刷

### 服务器优化
- Tomcat优化
   - 内存优化
   - 并发优化
   - APR优化
- Nginx优化
   - 缓存
   - 状态监控
   - 负载均衡
- LV四层负载均衡
- LVS + Keepalived高可用

